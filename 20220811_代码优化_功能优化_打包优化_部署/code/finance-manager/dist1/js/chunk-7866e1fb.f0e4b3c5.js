(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7866e1fb"],{"0e18":function(t,e,n){"use strict";n.d(e,"e",(function(){return i})),n.d(e,"i",(function(){return o})),n.d(e,"f",(function(){return r})),n.d(e,"j",(function(){return l})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return c})),n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return p})),n.d(e,"h",(function(){return b})),n.d(e,"g",(function(){return f}));var a=n("b775");const i=t=>Object(a["a"])(Object(a["b"])({url:"/loan/create",method:"post",data:t})),o=t=>Object(a["a"])(Object(a["b"])({url:"/loan/update",method:"put",data:t})),r=t=>Object(a["a"])(Object(a["b"])({url:"/loan/delete/"+t,method:"delete"})),l=t=>Object(a["a"])(Object(a["b"])({url:"/loan/submitToApprove",method:"post",data:{id:t}}));function s(t,e){let n=t?"first":"end",i=e?"pass":"reject",o=`/approve/${n}/${i}`;return function(t){return Object(a["a"])(Object(a["b"])({url:o,method:"post",data:{loanId:t,appId:t}}))}}const u=s(1,1),c=s(1,0),d=s(0,1),p=s(0,0),b=t=>Object(a["a"])(Object(a["b"])({url:"/contract/createFile",method:"post",data:{id:t}})),f=t=>Object(a["a"])(Object(a["b"])({url:"/contract/download",method:"get",params:{id:t}}))},"1b62":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return o}));var a={data(){return{currentPage:1,pageSizes:[10,20,30,40],pageSize:10,total:0,query:""}},computed:{frontPageOptions(){return{currentPage:this.currentPage,pageSize:this.pageSize,pageSizes:this.pageSizes,query:this.query,total:this.total}}},methods:{getApiPager(){let t={pageNo:this.currentPage,pageSize:this.pageSize};return this.query&&""!==this.query.trim()&&(t.name=this.query),t},setTotal(t){this.total=t},setQueryName(t){this.query=t,this.currentPage=1,this.init()},sizeChange(t){this.pageSize=t,this.init()},currentPageChange(t){this.currentPage=t,this.init()}}},i=n("b775"),o={methods:{beforeInit(){return!1},afterInit(){return null},async init(){var t,e,n,a,o;if(!await this.beforeInit())return;let[r,l]=await Object(i["a"])(Object(i["b"])({url:this.url,...this.customField,params:{...this.getApiPager(),...this.params}}));if(this.afterInit(r),l)return this.$message("请求失败");this.tableData=null===r||void 0===r||null===(t=r.data)||void 0===t||null===(e=t.data)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data,this.setTotal(null===r||void 0===r||null===(a=r.data)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.rows)}}}},dc0e:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"input-manager"}},[e("GSearchQuery",{scopedSlots:t._u([{key:"default",fn:function({q:n}){return[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.setQueryName(n)}}},[t._v("搜索")])]}}])}),e("GTable",{attrs:{options:t.conf.options,pageOptions:t.frontPageOptions,data:t.tableData,loadingTag:t.loadingTag,columns:t.conf.columns},on:{handleCurrentChange:t.currentPageChange,"selection-change":t.onSelectionChange,"size-change":t.sizeChange},scopedSlots:t._u([{key:"birthday",fn:function(n){return[e("el-table-column",{attrs:{width:"170",prop:n.prop,label:n.label},scopedSlots:t._u([{key:"default",fn:function({row:n}){return[e("span",[t._v(t._s(t._f("birthday")(n.birthday)))])]}}],null,!0)})]}},{key:"sex",fn:function(n){return[e("el-table-column",{attrs:{align:"center",prop:n.prop,label:n.label},scopedSlots:t._u([{key:"default",fn:function({row:n}){return[e("span",[t._v(t._s(t._f("sex")(n.sex)))])]}}],null,!0)})]}},{key:"education",fn:function(n){return[e("el-table-column",{attrs:{align:"center",prop:n.prop,label:n.label},scopedSlots:t._u([{key:"default",fn:function({row:n}){return[e("span",[t._v(t._s(t._f("education")(n.education)))])]}}],null,!0)})]}},{key:"status",fn:function(n){return[e("el-table-column",{attrs:{width:"100",align:"center",prop:n.prop,label:n.label},scopedSlots:t._u([{key:"default",fn:function({row:n}){return[e("el-tag",{attrs:{type:t._f("statusColor")(n.status)}},[t._v(t._s(t._f("status")(n.status)))])]}}],null,!0)})]}},{key:"opts",fn:function(n){return[e("el-table-column",{attrs:{label:n.label,width:n.width},scopedSlots:t._u([{key:"default",fn:function({row:n}){return[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.showEdit(n)}}},[t._v("编辑")]),e("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.delLoan(n.id)}}},[t._v("删除")]),e("el-button",{attrs:{type:"success"},on:{click:function(e){return t.submit(n.id)}}},[t._v("提交审核")])]}}],null,!0)})]}}])}),e("el-dialog",{attrs:{title:"申请管理-编辑",visible:t.dialogVisible,width:"30%"},on:{open:function(e){t.exist=!0},closed:function(e){t.exist=!1},"update:visible":function(e){t.dialogVisible=e}}},[t.exist?e("GFormCreator",{attrs:{conf:t.editConf},on:{submit:t.save}}):t._e()],1)],1)},i=[],o=Object.freeze({options:{loading:!0,useIndex:!0,useMultiSelect:!0},pageOptions:{},columns:[{label:"姓名",prop:"name"},{label:"出生日期",prop:"birthday",slot:"birthday"},{label:"性别",prop:"sex",slot:"sex"},{label:"教育程度",prop:"education",slot:"education"},{label:"居住地址",prop:"address1"},{label:"手机号",prop:"mobile_phone",isHide:!1},{label:"申请状态",prop:"status",slot:"status"},{label:"操作",width:1e3,prop:"opts",slot:"opts"},{label:"配送信息",children:[{label:"地址",children:[{label:"省份",prop:"address1"},{label:"市区"},{label:"地址"}]}]},{label:"自定义html",formatter:function(t){return`<div>\n                        <h2>${t.row.name}</h2>\n                        <button>${t.$index}</button>\n                </div>  `}}]}),r=n("1b62"),l=n("8890"),s=n("0e18"),u=n("2daa"),c={name:"input-manager",mixins:[r["b"],r["a"]],created(){this.init()},methods:{async submit(t){if(!await this.confirm("是否确认提交申请?"))return;let[e,n]=await Object(s["j"])(t);e&&this.init()},async delLoan(t){let e=await this.confirm("是否确认删除?");if(!e)return;let[n,a]=await Object(s["f"])(t);this.init()},async save(t){console.log("保存数据",t);let[e,n]=await Object(s["i"])({...t,id:this.editingId});if(n)return this.message.error("请求错误");this.dialogVisible=!1,this.$notify.success({title:"提示",message:"编辑成功",showClose:!1}),this.init()},showEdit(t){this.editingId=t.id,this.editConf={items:[[{colspan:20,type:"input",key:"name",label:"姓名",value:t.name}],[{colspan:20,type:"select",key:"sex",label:"性别",value:t.sex,options:u["e"]}]],rules:{name:[{required:!0,message:"必须填写用户名"}],sex:[{required:!0,message:"必须填写性别"}]}},this.dialogVisible=!0},beforeInit(){return this.url="/loan/list",this.customField={loadingTag:this.loadingTag},!0},onSelectionChange(t){console.log("选中改变了",t)}},data(){return{conf:o,tableData:[],loadingTag:"tab1",dialogVisible:!1,editConf:{},exist:!1}},components:{GFormCreator:l["a"]}},d=c,p=n("2877"),b=Object(p["a"])(d,a,i,!1,null,null,null);e["default"]=b.exports}}]);
//# sourceMappingURL=chunk-7866e1fb.f0e4b3c5.js.map