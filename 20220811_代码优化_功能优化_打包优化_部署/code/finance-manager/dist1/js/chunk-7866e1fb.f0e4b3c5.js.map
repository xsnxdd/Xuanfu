{"version":3,"sources":["webpack:///./src/apis/loan.js","webpack:///./src/mixins/pager.js","webpack:///./src/mixins/crud.js","webpack:///./src/views/input-manager/index.vue","webpack:///./src/views/input-manager/loanListConf.js","webpack:///src/views/input-manager/index.vue","webpack:///./src/views/input-manager/index.vue?a08c","webpack:///./src/views/input-manager/index.vue?c73a"],"names":["createLoan","data","pretty","request","url","method","saveLoan","deleteLoan","id","submitApprove","approveHandler","isFirst","isPass","param1","param2","loanId","appId","approveFirstPass","approveFirstReject","approveEndPass","approveEndReject","genContractFile","downloadContract","params","currentPage","pageSizes","pageSize","total","query","computed","frontPageOptions","this","methods","getApiPager","pageNo","trim","name","setTotal","setQueryName","q","init","sizeChange","size","currentPageChange","page","beforeInit","afterInit","res","err","customField","$message","tableData","rows","render","_vm","_c","_self","attrs","scopedSlots","_u","key","fn","on","$event","_v","conf","options","loadingTag","columns","onSelectionChange","col","prop","label","row","_s","_f","birthday","sex","education","status","width","showEdit","delLoan","submit","dialogVisible","exist","editConf","save","_e","staticRenderFns","Object","freeze","loading","useIndex","useMultiSelect","pageOptions","slot","isHide","children","formatter","$index","mixins","created","console","title","message","showClose","items","colspan","type","value","rules","required","components","GFormCreator","component"],"mappings":"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","file":"js/chunk-7866e1fb.f0e4b3c5.js","sourcesContent":["import { request, pretty } from '@/utils/request'\r\n\r\n\r\nexport const createLoan = (data) => {\r\n    return pretty(request({\r\n        url: '/loan/create',\r\n        method: 'post',\r\n        data,\r\n    }))\r\n}\r\nexport const queryLoan = (params, customField) => {\r\n    return pretty(request({\r\n        url: '/loan/list',\r\n        params,\r\n        ...customField\r\n    }))\r\n}\r\n\r\nexport const saveLoan = (data) => {\r\n    return pretty(request({\r\n        url: '/loan/update',\r\n        method: 'put',\r\n        data: data\r\n    }))\r\n}\r\n// /loan/delete/:id\r\nexport const deleteLoan = (id) => {\r\n    return pretty(request({\r\n        url: '/loan/delete/' + id,\r\n        method: 'delete',\r\n    }))\r\n}\r\n\r\n// 提交\r\nexport const submitApprove = id => {\r\n    return pretty(request({\r\n        url: '/loan/submitToApprove',\r\n        method: 'post',\r\n        data: {\r\n            id\r\n        }\r\n    }))\r\n}\r\n/**\r\n *  /approve/first/pass\r\n    /approve/first/reject\r\n    /approve/end/pass\r\n    /approve/end/reject\r\nloanId申请id\r\nappId申请id\r\n */\r\nfunction approveHandler(isFirst, isPass) {\r\n    let param1 = isFirst ? 'first' : 'end';\r\n    let param2 = isPass ? 'pass' : 'reject';\r\n    let url = `/approve/${param1}/${param2}`\r\n    return function (loanId) {\r\n        return pretty(request({\r\n            url: url,\r\n            method: 'post',\r\n            data: {\r\n                loanId,\r\n                appId: loanId\r\n            }\r\n        }))\r\n    }\r\n}\r\n\r\nexport const approveFirstPass = approveHandler(1, 1),\r\n    approveFirstReject = approveHandler(1, 0),\r\n    approveEndPass = approveHandler(0, 1),\r\n    approveEndReject = approveHandler(0, 0);\r\n\r\n\r\nexport const genContractFile = (id) => {\r\n    return pretty(request({\r\n        url: '/contract/createFile',\r\n        method: 'post',\r\n        data: {\r\n            id\r\n        }\r\n    }))\r\n}\r\n\r\n// 获取下载url\r\nexport const downloadContract = id => pretty(request({\r\n    url: '/contract/download',\r\n    method: 'get',\r\n    params: {\r\n        id\r\n    }\r\n}));","export default {\r\n    data(){\r\n        return {\r\n            // 前端的东西\r\n            currentPage: 1,\r\n            pageSizes: [10, 20, 30, 40], // 显示的可切换\r\n            pageSize: 10, // 当前的size\r\n            total: 0, // 总条数\r\n            query:'', // 查询条件\r\n        }\r\n    },\r\n    computed:{\r\n        frontPageOptions(){\r\n            return {\r\n                currentPage:this.currentPage,\r\n                pageSize:this.pageSize,\r\n                pageSizes:this.pageSizes,\r\n                query:this.query,\r\n                total:this.total\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        // 提供后端数据访问的参数\r\n        getApiPager(){\r\n            let params =  {\r\n                pageNo:this.currentPage,\r\n                pageSize:this.pageSize,\r\n            }\r\n            if (this.query && this.query.trim() !== \"\") {\r\n                params.name = this.query;\r\n            }\r\n            return params;\r\n        },\r\n        setTotal(total){\r\n            this.total = total;\r\n        },\r\n        // name的改变\r\n        setQueryName(q) {\r\n            this.query = q;\r\n            this.currentPage = 1;\r\n            this.init();\r\n        },\r\n        // pageSize的改变, 页显示数\r\n        sizeChange(size) {\r\n           this.pageSize = size;\r\n           this.init();\r\n        },\r\n        // 当前页的改变\r\n        currentPageChange(page) {\r\n            this.currentPage = page;\r\n            this.init();\r\n        },\r\n    }\r\n}","import { request, pretty } from '@/utils/request';\r\nexport default {\r\n    methods: {\r\n        beforeInit() {\r\n            return false;\r\n        },\r\n        afterInit(){\r\n            return null;\r\n        },\r\n        // 数据初始化\r\n        async init() {\r\n            // 需要url ,需要请求参数loadingTag\r\n            // 判断是否设置了参数\r\n            if (!await this.beforeInit()) { // 3.验证并执行beforeInit方法\r\n                return;\r\n            }\r\n            // 4.使用beforeInit方法传递的值\r\n            let [res, err] = await pretty(request({\r\n                url: this.url,\r\n                ...this.customField,\r\n                params:{\r\n                    ...this.getApiPager(),\r\n                    ...this.params// 自定义参数\r\n                }\r\n                    \r\n            }));\r\n            // 后续处理数据\r\n            this.afterInit(res);\r\n            if (err) return this.$message('请求失败')\r\n\r\n            this.tableData = res?.data?.data?.data?.data;\r\n            // 设置total\r\n            this.setTotal(res?.data?.data?.rows);\r\n        }\r\n\r\n\r\n    }\r\n}","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"input-manager\"}},[_c('GSearchQuery',{scopedSlots:_vm._u([{key:\"default\",fn:function({ q }){return [_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.setQueryName(q)}}},[_vm._v(\"搜索\")])]}}])}),_c('GTable',{attrs:{\"options\":_vm.conf.options,\"pageOptions\":_vm.frontPageOptions,\"data\":_vm.tableData,\"loadingTag\":_vm.loadingTag,\"columns\":_vm.conf.columns},on:{\"handleCurrentChange\":_vm.currentPageChange,\"selection-change\":_vm.onSelectionChange,\"size-change\":_vm.sizeChange},scopedSlots:_vm._u([{key:\"birthday\",fn:function(col){return [_c('el-table-column',{attrs:{\"width\":\"170\",\"prop\":col.prop,\"label\":col.label},scopedSlots:_vm._u([{key:\"default\",fn:function({ row }){return [_c('span',[_vm._v(_vm._s(_vm._f(\"birthday\")(row.birthday)))])]}}],null,true)})]}},{key:\"sex\",fn:function(col){return [_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":col.prop,\"label\":col.label},scopedSlots:_vm._u([{key:\"default\",fn:function({ row }){return [_c('span',[_vm._v(_vm._s(_vm._f(\"sex\")(row.sex)))])]}}],null,true)})]}},{key:\"education\",fn:function(col){return [_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":col.prop,\"label\":col.label},scopedSlots:_vm._u([{key:\"default\",fn:function({ row }){return [_c('span',[_vm._v(_vm._s(_vm._f(\"education\")(row.education)))])]}}],null,true)})]}},{key:\"status\",fn:function(col){return [_c('el-table-column',{attrs:{\"width\":\"100\",\"align\":\"center\",\"prop\":col.prop,\"label\":col.label},scopedSlots:_vm._u([{key:\"default\",fn:function({ row }){return [_c('el-tag',{attrs:{\"type\":_vm._f(\"statusColor\")(row.status)}},[_vm._v(_vm._s(_vm._f(\"status\")(row.status)))])]}}],null,true)})]}},{key:\"opts\",fn:function(col){return [_c('el-table-column',{attrs:{\"label\":col.label,\"width\":col.width},scopedSlots:_vm._u([{key:\"default\",fn:function({ row }){return [_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.showEdit(row)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":function($event){return _vm.delLoan(row.id)}}},[_vm._v(\"删除\")]),_c('el-button',{attrs:{\"type\":\"success\"},on:{\"click\":function($event){return _vm.submit(row.id)}}},[_vm._v(\"提交审核\")])]}}],null,true)})]}}])}),_c('el-dialog',{attrs:{\"title\":\"申请管理-编辑\",\"visible\":_vm.dialogVisible,\"width\":\"30%\"},on:{\"open\":function($event){_vm.exist=true},\"closed\":function($event){_vm.exist=false},\"update:visible\":function($event){_vm.dialogVisible=$event}}},[(_vm.exist)?_c('GFormCreator',{attrs:{\"conf\":_vm.editConf},on:{\"submit\":_vm.save}}):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default Object.freeze({\r\n    options: {\r\n        loading: true,\r\n        useIndex: true,\r\n        useMultiSelect: true,\r\n    },  // table属性\r\n    pageOptions: {}, // 分页器属性\r\n    columns: [\r\n        {\r\n            label: \"姓名\",\r\n            prop: \"name\",\r\n            // width:\"20\"\r\n        },\r\n        {\r\n            label: \"出生日期\",\r\n            prop: \"birthday\",\r\n            slot:'birthday'\r\n        },\r\n        {\r\n            label: \"性别\",\r\n            prop: \"sex\",\r\n            slot:'sex'\r\n        },\r\n        {\r\n            label: \"教育程度\",\r\n            prop: \"education\",\r\n            slot:'education'\r\n        },\r\n        {\r\n            label: \"居住地址\",\r\n            prop: \"address1\"\r\n        },\r\n        {\r\n            label: \"手机号\",\r\n            prop: \"mobile_phone\",\r\n            isHide:false,\r\n        },\r\n        {\r\n            label: \"申请状态\",\r\n            prop: \"status\",\r\n            slot: \"status\"\r\n        },\r\n        {\r\n            label: \"操作\",\r\n            width: 1000,\r\n            prop: \"opts\",\r\n            slot: \"opts\"\r\n        },\r\n        {\r\n            label:'配送信息',\r\n            children:[\r\n                {\r\n                    label:'地址',\r\n                    children:[\r\n                        { label:'省份',prop:'address1'},\r\n                        { label:'市区'},\r\n                        { label:'地址'},\r\n                    ]\r\n                }\r\n            ]\r\n\r\n        },\r\n        {\r\n            // html字符串formatter\r\n            label:'自定义html',\r\n            formatter:function(prop){\r\n             // prop内部.row是行的数据, el-table-column\r\n                return `<div>\r\n                        <h2>${prop.row.name}</h2>\r\n                        <button>${prop.$index}</button>\r\n                </div>  `\r\n            }\r\n\r\n        }   \r\n    ] // column的配置\r\n})","<template>\r\n    <div id=\"input-manager\">\r\n        <GSearchQuery>\r\n            <template v-slot=\"{ q }\">\r\n                <el-button type=\"primary\" @click=\"setQueryName(q)\">搜索</el-button>\r\n            </template>\r\n        </GSearchQuery>\r\n        <GTable :options=\"conf.options\" :pageOptions=\"frontPageOptions\" :data=\"tableData\" :loadingTag=\"loadingTag\"\r\n            :columns=\"conf.columns\" @handleCurrentChange=\"currentPageChange\" @selection-change=\"onSelectionChange\"\r\n            @size-change=\"sizeChange\">\r\n\r\n            <!-- 数据处理在crud中,所以不方便在js中处理 -->\r\n            \r\n            <template #birthday=\"col\">\r\n                <el-table-column width=\"170\" :prop=\"col.prop\" :label=\"col.label\"  >\r\n                    <template v-slot=\"{ row }\">\r\n                        <span>{{ row.birthday | birthday }}</span>\r\n                    </template>\r\n                </el-table-column>\r\n            </template>\r\n\r\n            <template #sex=\"col\">\r\n                <el-table-column align=\"center\" :prop=\"col.prop\" :label=\"col.label\"  >\r\n                    <template v-slot=\"{ row }\">\r\n                        <span>{{ row.sex | sex }}</span>\r\n                    </template>\r\n                </el-table-column>\r\n            </template>\r\n\r\n             <template #education=\"col\">\r\n                <el-table-column align=\"center\" :prop=\"col.prop\" :label=\"col.label\"  >\r\n                    <template v-slot=\"{ row }\">\r\n                        <span>{{ row.education | education }}</span>\r\n                    </template>\r\n                </el-table-column>\r\n            </template>\r\n\r\n            <template v-slot:status=\"col\">\r\n                <el-table-column width=\"100\" align=\"center\" :prop=\"col.prop\" :label=\"col.label\">\r\n                    <template v-slot=\"{ row }\">\r\n                        <el-tag :type=\"row.status | statusColor\">{{ row.status |status }}</el-tag>\r\n                    </template>\r\n                </el-table-column>\r\n            </template>\r\n\r\n            <template v-slot:opts=\"col\">\r\n                <el-table-column :label=\"col.label\" :width=\"col.width\">\r\n                    <template v-slot=\"{ row }\">\r\n                        <el-button @click=\"showEdit(row)\" type=\"primary\">编辑</el-button>\r\n                        <el-button @click=\"delLoan(row.id)\"  type=\"danger\">删除</el-button>\r\n                        <el-button @click=\"submit(row.id)\"   type=\"success\">提交审核</el-button>\r\n                    </template>\r\n                </el-table-column>\r\n            </template>\r\n        </GTable>\r\n\r\n        <!-- 编辑对话框 -->\r\n        <el-dialog title=\"申请管理-编辑\" @open=\"exist=true\"  @closed=\"exist=false\"  :visible.sync=\"dialogVisible\" width=\"30%\">\r\n            <!-- 不论如何都不会就地复用元素  \r\n                <GFormCreator  :conf=\"editConf\" @submit=\"save\" :key=\"Math.random()\" ></GFormCreator>\r\n            -->\r\n            <GFormCreator v-if=\"exist\" :conf=\"editConf\" @submit=\"save\" ></GFormCreator>\r\n        </el-dialog>\r\n\r\n\r\n\r\n    </div>\r\n</template>\r\n<script>\r\nimport loanListConf from './loanListConf';\r\n\r\nimport { pager, crud } from '@/mixins';\r\nimport GFormCreator from '../../components/GFormCreator.vue';\r\nimport { saveLoan,deleteLoan,submitApprove } from '@/apis/loan';\r\nimport {\r\n    sexOptions,\r\n} from '@/conf';\r\nexport default {\r\n    name:'input-manager',\r\n    // 这里有问题就会报错 undefined components\r\n    mixins: [pager, crud],\r\n    created() {\r\n        this.init(); // 2 调用方法\r\n    },\r\n    methods: {\r\n        // 提交\r\n        async submit(id){\r\n            if (!await this.confirm('是否确认提交申请?'))return;\r\n            let [res,err] = await submitApprove(id);\r\n            if (!res) return; // 如果后续有依赖res比较严重的逻辑,最好判断一下\r\n            this.init();\r\n        },\r\n        // 删除\r\n        async delLoan(id) {\r\n            let isConfirm = await this.confirm('是否确认删除?');\r\n            if (!isConfirm)return;\r\n            let [res,err] = await deleteLoan(id);\r\n            this.init();\r\n        },\r\n        async save(data) {\r\n            console.log('保存数据', data);\r\n\r\n            let [res,err] = await saveLoan({\r\n                ...data,\r\n                id:this.editingId\r\n            });\r\n\r\n            if(err)return this.message.error('请求错误');\r\n\r\n\r\n            this.dialogVisible = false;\r\n            this.$notify.success({\r\n                title: '提示',\r\n                message: '编辑成功',\r\n                showClose: false\r\n            });\r\n            // 列表更新\r\n            this.init();\r\n        },\r\n        showEdit(row) {\r\n            // 保存当前编辑id\r\n            this.editingId = row.id;\r\n            this.editConf = {\r\n                items: [\r\n                    [{ colspan: 20, type: 'input', key: 'name', label: '姓名', value: row.name }],\r\n                    [{\r\n                        colspan: 20, type: 'select', key: 'sex', label: '性别', value: row.sex,\r\n                        options: sexOptions\r\n                    }]\r\n                ],\r\n                rules: {\r\n                    name: [{ required: true, message: '必须填写用户名' }],\r\n                    sex: [{ required: true, message: '必须填写性别' }],\r\n                }\r\n            }\r\n            this.dialogVisible = true;\r\n        },\r\n        beforeInit() {\r\n            this.url = \"/loan/list\";\r\n            this.customField = {\r\n                loadingTag: this.loadingTag\r\n            };\r\n            return true;\r\n        },\r\n        onSelectionChange(data) {\r\n            console.log(\"选中改变了\", data);\r\n        },\r\n    },\r\n    data() {\r\n        return {\r\n            conf: loanListConf,\r\n            tableData: [],\r\n            loadingTag: \"tab1\",\r\n            dialogVisible: false,\r\n            editConf: {},\r\n            exist:false\r\n        };\r\n    },\r\n    components: { GFormCreator }\r\n}\r\n</script>\r\n<style>\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=58e29f00&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}