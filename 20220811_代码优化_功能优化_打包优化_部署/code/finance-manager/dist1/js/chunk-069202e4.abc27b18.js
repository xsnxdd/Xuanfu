(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-069202e4"],{"0e18":function(t,e,a){"use strict";a.d(e,"e",(function(){return i})),a.d(e,"i",(function(){return r})),a.d(e,"f",(function(){return o})),a.d(e,"j",(function(){return l})),a.d(e,"c",(function(){return u})),a.d(e,"d",(function(){return d})),a.d(e,"a",(function(){return c})),a.d(e,"b",(function(){return b})),a.d(e,"h",(function(){return p})),a.d(e,"g",(function(){return h}));var n=a("b775");const i=t=>Object(n["a"])(Object(n["b"])({url:"/loan/create",method:"post",data:t})),r=t=>Object(n["a"])(Object(n["b"])({url:"/loan/update",method:"put",data:t})),o=t=>Object(n["a"])(Object(n["b"])({url:"/loan/delete/"+t,method:"delete"})),l=t=>Object(n["a"])(Object(n["b"])({url:"/loan/submitToApprove",method:"post",data:{id:t}}));function s(t,e){let a=t?"first":"end",i=e?"pass":"reject",r=`/approve/${a}/${i}`;return function(t){return Object(n["a"])(Object(n["b"])({url:r,method:"post",data:{loanId:t,appId:t}}))}}const u=s(1,1),d=s(1,0),c=s(0,1),b=s(0,0),p=t=>Object(n["a"])(Object(n["b"])({url:"/contract/createFile",method:"post",data:{id:t}})),h=t=>Object(n["a"])(Object(n["b"])({url:"/contract/download",method:"get",params:{id:t}}))},"1b62":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return r}));var n={data(){return{currentPage:1,pageSizes:[10,20,30,40],pageSize:10,total:0,query:""}},computed:{frontPageOptions(){return{currentPage:this.currentPage,pageSize:this.pageSize,pageSizes:this.pageSizes,query:this.query,total:this.total}}},methods:{getApiPager(){let t={pageNo:this.currentPage,pageSize:this.pageSize};return this.query&&""!==this.query.trim()&&(t.name=this.query),t},setTotal(t){this.total=t},setQueryName(t){this.query=t,this.currentPage=1,this.init()},sizeChange(t){this.pageSize=t,this.init()},currentPageChange(t){this.currentPage=t,this.init()}}},i=a("b775"),r={methods:{beforeInit(){return!1},afterInit(){return null},async init(){var t,e,a,n,r;if(!await this.beforeInit())return;let[o,l]=await Object(i["a"])(Object(i["b"])({url:this.url,...this.customField,params:{...this.getApiPager(),...this.params}}));if(this.afterInit(o),l)return this.$message("请求失败");this.tableData=null===o||void 0===o||null===(t=o.data)||void 0===t||null===(e=t.data)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.data,this.setTotal(null===o||void 0===o||null===(n=o.data)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.rows)}}}},d9be:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"approve"}},[e("GSearchQuery",{on:{setValue:t.setQueryName}}),e("GTable",{attrs:{options:t.conf.options,pageOptions:t.frontPageOptions,data:t.tableData,loadingTag:t.loadingTag,columns:t.conf.columns},on:{handleCurrentChange:t.currentPageChange,"size-change":t.sizeChange},scopedSlots:t._u([{key:"birthday",fn:function(a){return[e("el-table-column",{attrs:{width:"170",prop:a.prop,label:a.label},scopedSlots:t._u([{key:"default",fn:function({row:a}){return[e("span",[t._v(t._s(t._f("birthday")(a.birthday)))])]}}],null,!0)})]}},{key:"opts",fn:function(a){return[e("el-table-column",{attrs:{label:a.label,width:a.width},scopedSlots:t._u([{key:"default",fn:function({row:a}){return[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.showInfo(a)}}},[t._v("查看")]),e("el-button",{attrs:{type:"success"},on:{click:function(e){return t.pass(a.id)}}},[t._v("通过")]),e("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.reject(a.id)}}},[t._v("拒绝")])]}}],null,!0)})]}}])}),e("el-dialog",{attrs:{title:"贷款审批-查看详情",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("GFormCreator",{key:Math.random(),attrs:{nonCheck:!0,conf:t.editConf}},[[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")])]],2)],1)],1)},i=[],r=a("fe4c"),o=a("1b62"),l=(a("8975"),a("0e18")),s=a("2b0e"),u={name:"loan-approve-first",mixins:[o["b"],o["a"]],methods:{async pass(t){if(!await this.confirm("是否确认初审通过?"))return;let[e,a]=await Object(l["c"])(t);e&&this.init()},async reject(t){if(!await this.confirm("是否确认初审拒绝?"))return;let[e,a]=await Object(l["d"])(t);e&&this.init()},showInfo(t){this.dialogVisible=!0;let e=s["default"].filter("birthday");this.editConf=Object.freeze({items:[[{key:"id",label:"id",value:t.id}],[{key:"name",label:"姓名",value:t.name}],[{key:"birthday",label:"出生日期",value:e(t.birthday)}],[{key:"sex",label:"性别",value:t.sex}],[{key:"education",label:"教育程度",value:t.education}],[{key:"address1",label:"地址",value:t.address1}],[{key:"mobile_phone",label:"手机号",value:t.mobile_phone}],[{key:"identity_card",label:"身份证",value:t.identity_card}]].map(t=>t.map(t=>({...t,type:"input",colspan:24,attrs:{disabled:!0}})))})},beforeInit(){return this.url="/approve/first/list",this.customField={loadingTag:this.loadingTag},!0},afterInit(t){console.log("获取到数据:",t)}},created(){console.log("初审组件被创建了"),this.init()},data(){return{conf:r["a"],loadingTag:"tab2",tableData:[],dialogVisible:!1,editConf:{}}}},d=u,c=a("2877"),b=Object(c["a"])(d,n,i,!1,null,null,null);e["default"]=b.exports},fe4c:function(t,e,a){"use strict";e["a"]=Object.freeze({options:{useIndex:!1,useMultiSelect:!1},columns:[{label:"姓名",prop:"name"},{label:"出生日期",prop:"birthday",slot:"birthday"},{label:"身份证",prop:"identity_card"},{label:"操作",width:1e3,prop:"opts",slot:"opts"}]})}}]);
//# sourceMappingURL=chunk-069202e4.abc27b18.js.map